(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,n,t){e.exports=t.p+"static/media/logo.285d437c.png"},44:function(e,n,t){e.exports=t(80)},61:function(e,n){},63:function(e,n){},80:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),a=t(36),i=t.n(a),c=t(8),s=t.n(c),u=t(13),d=t(2),l=t(6),f=t(17),h=t(16),m=t(18),p=t(1),g=t(3),y=t(4),b=t(37),v=t.n(b),w=function(){function e(){Object(d.a)(this,e),this.transcript="",this.lastStartedAt=0;var n=window.SpeechRecognition||window.webkitSpeechRecognition;n?(this.recognition=new n,this.recognition.lang="ko-KR",this.recognition.onspeechend=function(){console.log("\uba48\ucda4")}):alert("\uc774 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c\ub294 \uc74c\uc131 \uc778\uc2dd\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ud06c\ub86c \ube0c\ub77c\uc6b0\uc800\ub85c \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}return Object(l.a)(e,[{key:"start",value:function(e){var n=this;this.listening||(this.lastStartedAt=(new Date).getTime(),this.recognition.start(),this.recognition.onresult=function(e){var t=e.results[0][0].transcript;n.transcript=t,console.log("\uc778\uc2dd : ",t)},this.recognition.onend=function(t){e(n.transcript),n.transcript="";var r=(new Date).getTime()-n.lastStartedAt;r<1e3?setTimeout(function(){n.start(e)},1e3-r):n.start(e)})}}]),e}(),k=t(38),j=function(){function e(){Object(d.a)(this,e),this.recorder=new k.a.Recorder({wasmURL:"https://unpkg.com/vmsg@0.3.0/vmsg.wasm"})}return Object(l.a)(e,[{key:"sleep",value:function(e){return new Promise(function(n){return setTimeout(n,e)})}},{key:"startRecording",value:function(){var e=Object(u.a)(s.a.mark(function e(n){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.recorder.initAudio();case 2:return e.next=4,this.recorder.initWorker();case 4:return this.recorder.startRecording(),e.next=7,this.sleep(1e3*n);case 7:return e.next=9,this.recorder.stopRecording();case 9:return t=e.sent,e.abrupt("return",URL.createObjectURL(t));case 11:case"end":return e.stop()}},e,this)}));return function(n){return e.apply(this,arguments)}}()}]),e}();function O(){var e=Object(g.a)(["\n  background-color: #ffe3e3;\n  color: #ff6b6b;\n  border: 1px solid #ffa8a8;\n  border-radius: 0.2rem;\n\n  padding: 0.2rem 0.5rem;\n"]);return O=function(){return e},e}function R(){var e=Object(g.a)(['\n  font-family: "Noto Sans KR", sans-serif;\n  font-size: 1.2rem;\n\n  margin-right: auto;\n']);return R=function(){return e},e}function x(){var e=Object(g.a)(["\n  display: flex;\n  align-items: center;\n\n  border: 1px solid #dee2e6;\n  border-radius: 0.2rem;\n\n  background-color: #f8f9fa;\n\n  padding: 0.5rem;\n\n  margin-bottom: 0.5rem;\n"]);return x=function(){return e},e}var E=y.a.div(x()),K=y.a.li(R()),S=y.a.button(O()),A=function(e){var n=e.content,t=e.onRemove;return o.a.createElement(E,null,o.a.createElement(K,null," ",n," "),o.a.createElement(S,{onClick:t},"\uc0ad\uc81c"))};function D(){var e=Object(g.a)(["\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n"]);return D=function(){return e},e}var U=y.a.ul(D()),I=function(e){var n=e.keywords,t=e.onRemove;return o.a.createElement(U,null,n.map(function(e){return o.a.createElement(A,{key:e.id,content:e.content,onRemove:function(){return t(e.id)}})}))},C=function e(n){Object(d.a)(this,e),this.content=n,this.id=Date.now()};function L(){var e=Object(g.a)(['\n  border: none;\n  outline: none;\n\n  box-shadow: 0px 3px 6px #dee2e6;\n\n  font-size: 1.3rem;\n  font-family: "Noto Sans KR", sans-serif;\n\n  padding: 0.5rem 0.5rem;\n']);return L=function(){return e},e}function N(){var e=Object(g.a)(['\n  font-family: "Noto Sans KR", sans-serif;\n  font-size: 1rem;\n\n  color: #495057;\n\n  margin-bottom: 0.3rem;\n  margin-top: 1.5rem;\n']);return N=function(){return e},e}function W(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n\n  align-items: left;\n"]);return W=function(){return e},e}var F=y.a.div(W()),_=y.a.label(N()),q=y.a.input(L()),z=function(e){function n(e){var t;return Object(d.a)(this,n),(t=Object(f.a)(this,Object(h.a)(n).call(this,e))).state={keywords:t.props.keywords,keywordInput:""},t.onRemove=t.onRemove.bind(Object(p.a)(Object(p.a)(t))),t.handleKeyDown=t.handleKeyDown.bind(Object(p.a)(Object(p.a)(t))),t.handleChange=t.handleChange.bind(Object(p.a)(Object(p.a)(t))),t}return Object(m.a)(n,e),Object(l.a)(n,[{key:"onRemove",value:function(e){var n=this;this.setState({keywords:this.state.keywords.filter(function(n){return n.id!==e})},function(){return n.props.onUpdate(n.state.keywords)})}},{key:"handleKeyDown",value:function(e){var n=this;if("Enter"===e.key){var t=new C(this.state.keywordInput);this.setState({keywords:this.state.keywords.concat(t),keywordInput:""},function(){return n.props.onUpdate(n.state.keywords)})}}},{key:"handleChange",value:function(e){this.setState({keywordInput:e.target.value})}},{key:"render",value:function(){return o.a.createElement(F,null,o.a.createElement(_,{htmlFor:"keywordInput"},"\ud0a4\uc6cc\ub4dc \uc124\uc815"),o.a.createElement(I,{keywords:this.state.keywords,onRemove:this.onRemove}),o.a.createElement(q,{id:"keywordInput",type:"text",onKeyDown:this.handleKeyDown,onChange:this.handleChange,value:this.state.keywordInput}))}}]),n}(o.a.Component),J=t(41),P=t.n(J),H=function(){function e(){Object(d.a)(this,e),this.serverKey="AAAAopVgHyg:APA91bHEp3FkFdeWYlqUEs4wx3PQJuIoOuE5z5_VDdDsF03u9k-t4pyI4LBIVHLn2EvyDAtmQj8Y73j0Wro_5J5qcD9cy8JAqab1tI4tfBSwY-8pb6NwCigW2hVD3f-JUoqQxfrTjk6n",this.clientKey="dqE0kxtn3kM:APA91bFHvX0yhOIXWKhZL_esdy2KS-r3jKrxj2HeCVzR2JFlXQ-0QMaimLNur9_W7s1jNKRA1s8GsG5ByK6bqKS460LdeWJN71Dumu5VfCtWZUGnKq2igVnSNBHA_vPinIL2ZtSq55jZ",this.fcm=new P.a(this.serverKey)}return Object(l.a)(e,[{key:"send",value:function(e){var n=this;navigator.geolocation.getCurrentPosition(function(t){var r=t.coords.latitude,o=t.coords.longitude;console.log(r),console.log(o),console.log(t.coords.accuracy);var a={to:n.clientKey,notification:{title:"\uc6b0\uc0b0",body:e,sound:"default",icon:"ic_stat_name"},priority:"high",restricted_package_name:"com.example.woosan",data:{latitude:String(r),longitude:String(o)}};n.fcm.send(a,function(e,n){if(e)return console.error("Push\uba54\uc2dc\uc9c0 \ubc1c\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),void console.error(e);console.log("Push\uba54\uc2dc\uc9c0\uac00 \ubc1c\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),console.log(n)})},function(e){console.warn(e)},{enableHighAccuracy:!0})}}]),e}();function V(){var e=Object(g.a)(['\n  color: #707070;\n\n  font-family: "Noto Sans KR", sans-serif;\n  font-size: 0.9rem;\n']);return V=function(){return e},e}function B(){var e=Object(g.a)(["\n  border-radius: 100%;\n\n  margin-top: 3rem;\n  margin-bottom: 0.5rem;\n\n  height: 6rem;\n"]);return B=function(){return e},e}function T(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n\n  align-items: center;\n"]);return T=function(){return e},e}var Q=y.a.div(T()),Z=y.a.img(B()),G=y.a.span(V()),X=function(e){function n(){var e;return Object(d.a)(this,n),(e=Object(f.a)(this,Object(h.a)(n).call(this))).state={keywords:[]},e.recognizer=new w,e.recorder=new j,e.startRecognition=e.startRecognition.bind(Object(p.a)(Object(p.a)(e))),e.onKeywordUpdate=e.onKeywordUpdate.bind(Object(p.a)(Object(p.a)(e))),e.realEmergency=e.realEmergency.bind(Object(p.a)(Object(p.a)(e))),e.emergencySender=new H,e.startRecognition(),e}return Object(m.a)(n,e),Object(l.a)(n,[{key:"startRecognition",value:function(){var e=this;this.recognizer.start(function(){var n=Object(u.a)(s.a.mark(function n(t){var r,o;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:if(!(r<e.state.keywords.length)){n.next=12;break}if(!t.replace(/ /g,"").includes(e.state.keywords[r].content)){n.next=9;break}return e.emergencySender.send("\uac00\uc740\ub2d8\uc774 \uc704\ud5d8\uc5d0 \ucc98\ud588\uc2b5\ub2c8\ub2e4."),n.next=6,e.recorder.startRecording(5);case 6:return o=n.sent,e.downloadFile(o,(new Date).toDateString()),n.abrupt("return");case 9:r++,n.next=1;break;case 12:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}())}},{key:"downloadFile",value:function(e,n){var t=document.createElement("a");t.href=e,t.download=n,document.body.append(t),t.click(),t.remove(),window.addEventListener("focus",function(e){return URL.revokeObjectURL(t.href)},{once:!0})}},{key:"onKeywordUpdate",value:function(e){this.setState({keywords:e})}},{key:"realEmergency",value:function(){var e=Object(u.a)(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.emergencySender.send("\uac00\uc740\ub2d8\uc774 \uc704\ud5d8\uc5d0 \ucc98\ud588\uc2b5\ub2c8\ub2e4."),e.next=3,this.recorder.startRecording(5);case 3:return n=e.sent,this.downloadFile(n,(new Date).toDateString()),e.abrupt("return");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(Q,{className:"App"},o.a.createElement(Z,{src:v.a,onClick:this.realEmergency}),o.a.createElement(G,null,"To prevent further rain"),o.a.createElement(z,{keywords:this.state.keywords,onUpdate:this.onKeywordUpdate}))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[44,1,2]]]);
//# sourceMappingURL=main.6618d4a9.chunk.js.map